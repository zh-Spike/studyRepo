## 大数据

### 题目1

32位无符号整数的范围是0~4,294,967,295，现在有一个正好包含40亿个无符号整数的文件，所以在整个范围中必然存在没出现过的数。可以使用最多1GB的内存，怎么找到所有未出现过的数？

【进阶】

内存限制为 10MB，但是只用找到一个没出现过的数即可

限制为 3 KB
#### 解法

1.  0 ~ 2^32 -1 位图 

2. 3000 / 4 = 700 + 

    用 3KB 生成一个 int[512] 2^32 个数 / 512 = 8388608 

    每个用来统计每份的词频 没出现的话词频一定会变小 

    然后再把这个范围 再开 512 份

    感觉和天秤那个问题差不多 

### 题目2

有一个包含100亿个URL的大文件，假设每个URL占用64B，请找出其中所有重复的URL

【补充】
某搜索公司一天的用户搜索词汇是海量的(百亿数据量)，请设计一种求出每天热门 Top100 词汇的可行办法

#### 解法

`要问面试官有啥限制`


1. 布隆过滤器
   
   列个表 加进去 第二次出现就 ban

   可能一定失误率

2. 哈希分流

    取模  mod 100 哈希函数分流到到 100 个文件去

补充

    哈希函数 分流到小文件 
    小文件里用 HashMap K-V++ 

    二维堆结构 局部小排名合成大排名

    用 大根堆 来统计每个小文件的词频 

    然后把每个大根堆的堆顶抽出来 放到新的大根堆(总堆)

    每次取 取总堆的堆顶 然后把取出的那个小文件中的第二大的压到堆里

    以此类推


### 题目3 

32位无符号整数的范围是0~4294967295，现在有40亿个无符号整数，可以使用最多1GB的内存，找出所有出现了两次的数。

【补充】

可以使用最多10MB的内存，怎么找到这40亿个整数的中位数？

#### 解法

1. hash函数分流

    看看 1G 内存能放多少 hashMap (8 bit 一条)

    可以看分多少个小文件 然后把 输入数 mod 小文件数看看放到第几个小文件里 用 HashMap 统计每个小文件里的词频

    最后把每个小文件里的出现两次的词 打出来就好了

2. 位图升级

    一般位图都是 只能统计出现和没出现 那用两位信息来统计即可 
    
    00 没出现 01 出现一次 10 出现两次 11 出现两次即以上 位图就2 bit 

    2^32 * 2 bit / 8 < 1 G 

补充

     和第一题的做法类似 

     10KB / 4 = 2500 长度  